{{define "reports/card" }}
  <div id="report">
    <h2>{{.Title}} Summary</h2>
    <div class="card-grid">
      <div class="card ta-center">
        <h3 class="card-title">Income</h3>
        <div class="income">{{formatMoney .Income "." ","}}€</div>
      </div>

      <div class="card ta-center">
        <h3 class="card-title">Spending</h3>
        <div class="expense">{{formatMoney .Spending "." ","}}€</div>
      </div>

      <div class="card ta-center">
        <h3 class="card-title">Savings</h3>
        <div class="{{if gt .Savings 0}}income{{else}}expense{{end}}">{{formatMoney .Savings "." ","}}€</div>
        <div>
          {{if gt .Savings 0}}
            <span class="income">{{printf "%.1f%%" .SavingsPercentage}} of income</span>
          {{else}}
            <span class="expense">{{printf "%.1f%%" .SavingsPercentage}} of income</span>
          {{end}}
        </div>
      </div>
    </div>
    
    {{if or .ExpenseCategories .IncomeCategories}}
      <div class="report-details">
        <div class="categories-donut">
          <h2>Categories Breakdown</h2>
          <div class="donut-charts-grid">
            {{if .ExpenseCategories}}
              <div class="donut-chart-section">
                <h3>Expenses</h3>
                <div class="donut-chart-container">
                  <canvas id="expensesDonutChart" data-categories="{{.ExpenseCategories | json}}" data-type="expense"></canvas>
                </div>
              </div>
            {{end}}
            {{if .IncomeCategories}}
              <div class="donut-chart-section">
                <h3>Income</h3>
                <div class="donut-chart-container">
                  <canvas id="incomeDonutChart" data-categories="{{.IncomeCategories | json}}" data-type="income"></canvas>
                </div>
              </div>
            {{end}}
          </div>
          <div class="selected-category-details" id="categoryDetails" style="display: none;">
            <!-- Category details will be injected here via JavaScript -->
          </div>
        </div>
      </div>
    {{end}}
  </div>
{{end}}
