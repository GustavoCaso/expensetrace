{{define "reports/card" }} 
  <div id="report">
    <h2>{{.Title}} Summary</h2>
    <div class="card-grid">
      <div class="card ta-center">
        <h3 class="card-title">Income</h3>
        <div class="income">{{formatMoney .Income "." ","}}€</div>
      </div>
      
      <div class="card ta-center">
        <h3 class="card-title">Spending</h3>
        <div class="expense">{{formatMoney .Spending "." ","}}€</div>
      </div>
      
      <div class="card ta-center">
        <h3 class="card-title">Savings</h3>
        <div class="{{if gt .Savings 0}}income{{else}}expense{{end}}">{{formatMoney .Savings "." ","}}€</div>
        <div> 
          {{if gt .Savings 0}}
            <span class="income">{{printf "%.1f%%" .SavingsPercentage}} of income</span>
          {{else}}
            <span class="expense">{{printf "%.1f%%" .SavingsPercentage}} of income</span>
          {{end}}
        </div>
      </div>
    </div>
  
    <div class="report-details">
      <div class="chart-container">
        <h3>Spending Breakdown</h3>
        <div class="chart-placeholder">
          <div class="chart-legend">
            {{range $index, $category := .Categories}}
              {{if lt $category.Amount 0}}
                <div class="legend-item">
                  <span class="legend-color color-{{$index}}"></span>
                  <span class="legend-label">{{$category.Name}}</span>
                  <span class="legend-value expense">{{formatMoney $category.Amount "." ","}}€</span>
                </div>
              {{end}}
            {{end}}
          </div>
        </div>
      </div>
      
      <div class="categories-breakdown">
        <h3>Categories</h3>
        <div class="categories-tabs">
          <button class="tab-btn active" data-tab="expenses">Expenses</button>
          <button class="tab-btn" data-tab="income">Income</button>
        </div>
        
        <div id="expenses-tab" class="tab-content active">
          <ul id="categories-list">
            {{range $category := .Categories}}
              {{if lt $category.Amount 0}}
                {{template "reports/category" $category}}
              {{end}}
            {{end}}
          </ul>
        </div>
        
        <div id="income-tab" class="tab-content">
          <ul id="income-categories-list">
            {{range $category := .Categories}}
              {{if gt $category.Amount 0}}
                {{template "reports/category" $category}}
              {{end}}
            {{end}}
          </ul>
        </div>
      </div>
    </div>
  </div>
{{end}}
