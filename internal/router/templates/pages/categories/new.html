{{define "title"}}Create New Category{{end}}

{{define "main"}}
  <div class="category-actions">
    <nav class="category-tabs">
      <a href="/categories" hx-get="/categories" hx-target="#page" hx-swap="outerHTML" class="tab-link">All Categories</a>
      <a href="/category/uncategorized" hx-get="/category/uncategorized" hx-target="#page" hx-swap="outerHTML" class="tab-link">Uncategorized</a>
      <a href="/category/new" hx-get="/category/new" hx-target="#page" hx-swap="outerHTML" class="tab-link">New Category</a>
    </nav>
  </div>
  
  <div id="category-content">
    <div class="create-category-container">
      <div class="category-form-container">
        <h2>Create New Category</h2>
        
        <div id="form-results" class="form-results"></div>
        
        <form id="category-new" class="category-form">
          <div class="form-group">
            <label for="category-name">Category Name</label>
            <input id="category-name" type="text" name="name" required 
              placeholder="e.g., Groceries, Transportation, Entertainment"
              hx-trigger="keyup changed delay:500ms"
              hx-get="/category/validate-name"
              hx-target="#name-validation">
            <div id="name-validation" class="validation-feedback"></div>
          </div>
          
          <div class="form-group">
            <label for="category-pattern">Pattern (Regular Expression)</label>
            <input id="category-pattern" type="text" name="pattern" required 
              placeholder="e.g., grocery|supermarket|food"
              hx-trigger="keyup changed delay:500ms"
              hx-post="/category/test-pattern"
              hx-target="#pattern-results">
            <div class="input-help">
              Separate multiple terms with | (pipe). Pattern matching is case-insensitive.
            </div>
            <div id="pattern-validation" class="validation-feedback"></div>
          </div>
          
          <div class="pattern-helper">
            <h3>Common Pattern Examples</h3>
            <div class="pattern-examples">
              <div class="pattern-example" hx-on:click="document.getElementById('category-pattern').value += 'restaurant|cafe|dining'">
                <div class="example-name">Dining</div>
                <code>restaurant|cafe|dining</code>
              </div>
              <div class="pattern-example" hx-on:click="document.getElementById('category-pattern').value += 'uber|taxi|transit|bus|train'">
                <div class="example-name">Transportation</div>
                <code>uber|taxi|transit|bus|train</code>
              </div>
              <div class="pattern-example" hx-on:click="document.getElementById('category-pattern').value += 'amazon|shop|store|market'">
                <div class="example-name">Shopping</div>
                <code>amazon|shop|store|market</code>
              </div>
              <div class="pattern-example" hx-on:click="document.getElementById('category-pattern').value += 'netflix|spotify|subscription'">
                <div class="example-name">Subscriptions</div>
                <code>netflix|spotify|subscription</code>
              </div>
            </div>
          </div>
          
          <div class="form-actions">
            <button hx-post="/category/check" hx-target="#form-results" class="btn-secondary">Test Pattern</button>
            <button hx-post="/category" hx-target="#form-results" class="btn-primary">Create Category</button>
          </div>
        </form>
      </div>
      
      <div id="pattern-results" class="pattern-results">
        <div class="pattern-test-intro">
          <h3>Pattern Test Results</h3>
          <p>Enter a pattern above to see which uncategorized transactions it would match.</p>
        </div>
      </div>
    </div>
  </div>
{{end}}
